import{P as V,R as p,S as C}from"./chunk-CMQTMLMK.js";import{Ba as k,F as I,Ga as c,Ha as E,Ib as A,Ja as u,Jb as B,Ka as N,La as z,Lb as W,Pa as Z,W as w,Xc as L,Yc as P,a as x,aa as j,ba as O,bd as R,da as b,fa as S,ga as T,ha as M,ja as $,k as v,kc as Q,oa as F,q as s}from"./chunk-ABO2YJOP.js";var J=["container"],K=(()=>{let t=class t{get cog(){return this._cog}set cog(i){this._cog=this.cogSrv.merge("chart",{theme:"",libs:["https://gw.alipayobjects.com/os/lib/antv/g2/4.1.46/dist/g2.min.js","https://gw.alipayobjects.com/os/lib/antv/data-set/0.11.8/dist/data-set.js"]},i)}constructor(i,o){this.cogSrv=i,this.lazySrv=o,this.loading=!1,this.loaded=!1,this.notify$=new v,this.cog={theme:""}}libLoad(){return this.loading?(this.loaded&&this.notify$.next(),this):(this.loading=!0,this.lazySrv.load(this.cog.libs).then(()=>{this.loaded=!0,this.notify$.next()}),this)}get notify(){return this.notify$.asObservable()}ngOnDestroy(){this.notify$.unsubscribe()}};t.\u0275fac=function(o){return new(o||t)(b(P),b(L))},t.\u0275prov=j({token:t,factory:t.\u0275fac,providedIn:"root"});let n=t;return n})(),l=class l{get chart(){return this._chart}get winG2(){return window.G2}constructor(t,e,i,o,g){this.srv=t,this.el=e,this.ngZone=i,this.platform=o,this.cdr=g,this.repaint=!0,this.destroy$=new v,this.loaded=!1,this.delay=0,this.ready=new u,this.theme=t.cog.theme,this.srv.notify.pipe(w(this.destroy$),I(()=>!this.loaded)).subscribe(()=>this.load())}changeData(){}onInit(){}onChanges(t){}load(){this.ngZone.run(()=>{this.loaded=!0,this.cdr.detectChanges()}),setTimeout(()=>this.install(),this.delay)}ngOnInit(){this.platform.isBrowser&&(this.onInit(),this.winG2?this.load():this.srv.libLoad())}ngOnChanges(t){if(this.onChanges(t),this.onlyChangeData?this.onlyChangeData(t):Object.keys(t).length===1&&!!t.data){this.changeData();return}!this.chart||!this.repaint||this.ngZone.runOutsideAngular(()=>{this.destroyChart().install()})}destroyChart(){return this._chart&&this._chart.destroy(),this}ngOnDestroy(){this.resize$&&this.resize$.unsubscribe(),this.destroy$.next(),this.destroy$.complete(),this.destroyChart()}};l.\u0275fac=function(e){return new(e||l)(c(K),c(k),c(N),c(R),c(E))},l.\u0275dir=M({type:l,viewQuery:function(e,i){if(e&1&&B(J,7),e&2){let o;A(o=W())&&(i.node=o.first)}},inputs:{repaint:"repaint",delay:"delay",theme:"theme"},outputs:{ready:"ready"},features:[$]});var a=l;s([V()],a.prototype,"repaint",void 0);s([p()],a.prototype,"delay",void 0);s([C()],a.prototype,"load",null);s([C()],a.prototype,"destroyChart",null);function _(n,t){let e=x({showTitle:!1,showMarkers:!0,enterable:!0,domStyles:{"g2-tooltip":{padding:"0px"},"g2-tooltip-title":{display:"none"},"g2-tooltip-list-item":{margin:"4px"}}},t);return n==="mini"&&(e.position="top",e.domStyles["g2-tooltip"]={padding:"0px",backgroundColor:"transparent",boxShadow:"none"},e.itemTpl="<li>{value}</li>",e.offset=8),e}var h=class h extends a{constructor(){super(...arguments),this.color="#1890FF",this.height=0,this.borderWidth=5,this.padding=[8,8,8,8],this.data=[],this.yTooltipSuffix="",this.tooltipType="default",this.clickItem=new u}install(){let{el:t,height:e,padding:i,yTooltipSuffix:o,tooltipType:g,theme:G,color:q,borderWidth:H}=this,r=this._chart=new this.winG2.Chart({container:t.nativeElement,autoFit:!0,height:e,padding:i,theme:G});r.scale({x:{type:"cat"},y:{min:0}}),r.legend(!1),r.axis(!1),r.tooltip(_(g,{showCrosshairs:!1})),r.interval().position("x*y").color("x*y",(d,y)=>{let m=this.data.find(D=>D.x===d&&D.y===y);return m&&m.color?m.color:q}).size(H).tooltip("x*y",(d,y)=>({name:d,value:y+o})),r.on("interval:click",d=>{this.ngZone.run(()=>this.clickItem.emit({item:d.data?.data,ev:d}))}),this.ready.next(r),this.changeData(),r.render()}changeData(){let{_chart:t,data:e}=this;!t||!Array.isArray(e)||e.length<=0||t.changeData(e)}};h.\u0275fac=(()=>{let t;return function(i){return(t||(t=F(h)))(i||h)}})(),h.\u0275cmp=S({type:h,selectors:[["g2-mini-bar"]],hostVars:2,hostBindings:function(e,i){e&2&&Z("height",i.height,"px")},inputs:{color:"color",height:"height",borderWidth:"borderWidth",padding:"padding",data:"data",yTooltipSuffix:"yTooltipSuffix",tooltipType:"tooltipType"},outputs:{clickItem:"clickItem"},exportAs:["g2MiniBar"],features:[z],decls:0,vars:0,template:function(e,i){},encapsulation:2,changeDetection:0});var f=h;s([p()],f.prototype,"height",void 0);s([p()],f.prototype,"borderWidth",void 0);var It=(()=>{let t=class t{};t.\u0275fac=function(o){return new(o||t)},t.\u0275mod=T({type:t}),t.\u0275inj=O({imports:[Q]});let n=t;return n})();export{a,_ as b,f as c,It as d};
