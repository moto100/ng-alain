import{M as Jt,ja as Kt,la as te,wb as ee,xb as ne}from"./chunk-CMQTMLMK.js";import{$b as ut,Ad as P,B as q,Ba as wt,Bd as ht,F as Ct,Fa as p,Ga as x,Ha as at,Ib as K,Ja as st,Jb as tt,Ka as Y,Lb as et,Mb as C,Na as I,Oa as s,Pa as lt,Qa as j,Qe as Ht,Se as Wt,Ta as pt,Ua as Tt,V as M,Vb as _t,W as k,Wf as Zt,X as yt,Xa as d,Xf as Qt,Yf as Xt,Zb as Ut,_b as It,a as Z,ab as h,ac as Lt,ag as Yt,ba as xt,bb as g,bc as Nt,bd as Pt,cb as L,cc as Ft,cd as Mt,cg as Gt,db as w,dc as St,eb as T,ec as ft,ed as jt,ee as qt,fa as X,fb as bt,fd as Vt,fe as gt,ga as vt,gb as D,gd as Bt,ge as it,h as ot,ie as zt,j as R,ja as rt,k as Q,ka as b,kb as N,kc as Rt,la as U,mb as l,mc as Dt,nb as ct,nd as nt,ob as dt,q as S,qc as Ot,rb as _,rc as Et,s as $,sb as G,tc as $t,ub as J,vc as kt,w as A,wd as At,yb as mt,za as H,zb as V}from"./chunk-ABO2YJOP.js";var re=["file"],ae=["nz-upload-btn",""],oe=["*"];function se(n,o){}var W=n=>({$implicit:n});function le(n,o){if(n&1&&(h(0,"div",18),d(1,se,0,0,"ng-template",19),g()),n&2){let e=l(2).$implicit,t=_(5);j("ant-upload-list-item-file",!e.isUploading),p(1),s("ngTemplateOutlet",t)("ngTemplateOutletContext",V(4,W,e))}}function pe(n,o){if(n&1&&L(0,"img",22),n&2){let e=l(3).$implicit;s("src",e.thumbUrl||e.url,H),I("alt",e.name)}}function ce(n,o){if(n&1){let e=D();h(0,"a",20),N("click",function(i){b(e);let a=l(2).$implicit,r=l();return U(r.handlePreview(a,i))}),d(1,pe,1,2,"img",21),g()}if(n&2){l();let e=_(5),t=l().$implicit;j("ant-upload-list-item-file",!t.isImageUrl),s("href",t.url||t.thumbUrl,H),p(1),s("ngIf",t.isImageUrl)("ngIfElse",e)}}function de(n,o){}function me(n,o){if(n&1&&(h(0,"div",23),d(1,de,0,0,"ng-template",19),g()),n&2){let e=l(2).$implicit,t=_(5);p(1),s("ngTemplateOutlet",t)("ngTemplateOutletContext",V(2,W,e))}}function _e(n,o){}function ue(n,o){if(n&1&&d(0,_e,0,0,"ng-template",19),n&2){let e=l(2).$implicit,t=_(5);s("ngTemplateOutlet",t)("ngTemplateOutletContext",V(2,W,e))}}function fe(n,o){if(n&1&&(w(0,13),d(1,le,2,6,"div",14)(2,ce,2,5,"a",15)(3,me,2,4,"div",16),T(),d(4,ue,1,4,"ng-template",null,17,C)),n&2){let e=l().$implicit;s("ngSwitch",e.iconType),p(1),s("ngSwitchCase","uploading"),p(1),s("ngSwitchCase","thumbnail")}}function he(n,o){n&1&&(w(0),L(1,"span",29),T())}function ge(n,o){if(n&1&&(w(0),d(1,he,2,0,"ng-container",24),T()),n&2){let e=l(2).$implicit,t=_(4);p(1),s("ngIf",e.isUploading)("ngIfElse",t)}}function ze(n,o){if(n&1&&(w(0),G(1),T()),n&2){let e=l(5);p(1),J(" ",e.locale.uploading," ")}}function Ce(n,o){if(n&1&&(w(0),d(1,ze,2,1,"ng-container",24),T()),n&2){let e=l(2).$implicit,t=_(4);p(1),s("ngIf",e.isUploading)("ngIfElse",t)}}function ye(n,o){if(n&1&&L(0,"span",30),n&2){let e=l(2).$implicit;s("nzType",e.isUploading?"loading":"paper-clip")}}function xe(n,o){if(n&1&&(w(0)(1,13),d(2,ge,2,2,"ng-container",27)(3,Ce,2,2,"ng-container",27)(4,ye,1,1,"span",28),T()()),n&2){let e=l(3);p(1),s("ngSwitch",e.listType),p(1),s("ngSwitchCase","picture"),p(1),s("ngSwitchCase","picture-card")}}function ve(n,o){}function we(n,o){if(n&1&&L(0,"span",31),n&2){let e=l().$implicit;s("nzType",e.isImageUrl?"picture":"file")}}function Te(n,o){if(n&1&&d(0,xe,5,3,"ng-container",24)(1,ve,0,0,"ng-template",19,25,C)(3,we,1,1,"ng-template",null,26,C),n&2){let e=o.$implicit,t=_(2),i=l(2);s("ngIf",!i.iconRender)("ngIfElse",t),p(1),s("ngTemplateOutlet",i.iconRender)("ngTemplateOutletContext",V(4,W,e))}}function be(n,o){if(n&1){let e=D();h(0,"button",33),N("click",function(i){b(e);let a=l(2).$implicit,r=l();return U(r.handleRemove(a,i))}),L(1,"span",34),g()}if(n&2){let e=l(3);I("title",e.locale.removeFile)}}function Ue(n,o){if(n&1&&d(0,be,2,1,"button",32),n&2){let e=l(2);s("ngIf",e.icons.showRemoveIcon)}}function Ie(n,o){if(n&1){let e=D();h(0,"button",33),N("click",function(){b(e);let i=l(2).$implicit,a=l();return U(a.handleDownload(i))}),L(1,"span",35),g()}if(n&2){let e=l(3);I("title",e.locale.downloadFile)}}function Le(n,o){if(n&1&&d(0,Ie,2,1,"button",32),n&2){let e=l().$implicit;s("ngIf",e.showDownload)}}function Ne(n,o){}function Fe(n,o){}function Se(n,o){if(n&1&&(h(0,"span"),d(1,Ne,0,0,"ng-template",10)(2,Fe,0,0,"ng-template",10),g()),n&2){l(2);let e=_(9),t=_(7),i=l();pt("ant-upload-list-item-card-actions ",i.listType==="picture"?"picture":"",""),p(1),s("ngTemplateOutlet",e),p(1),s("ngTemplateOutlet",t)}}function Re(n,o){if(n&1&&d(0,Se,3,5,"span",36),n&2){let e=l(2);s("ngIf",e.listType!=="picture-card")}}function De(n,o){if(n&1){let e=D();h(0,"a",39),N("click",function(i){b(e);let a=l(2).$implicit,r=l();return U(r.handlePreview(a,i))}),G(1),g()}if(n&2){let e=l(2).$implicit;s("href",e.url,H),I("title",e.name)("download",e.linkProps&&e.linkProps.download),p(1),J(" ",e.name," ")}}function Oe(n,o){if(n&1){let e=D();h(0,"span",40),N("click",function(i){b(e);let a=l(2).$implicit,r=l();return U(r.handlePreview(a,i))}),G(1),g()}if(n&2){let e=l(2).$implicit;I("title",e.name),p(1),J(" ",e.name," ")}}function Ee(n,o){}function $e(n,o){if(n&1&&d(0,De,2,4,"a",37)(1,Oe,2,2,"span",38)(2,Ee,0,0,"ng-template",10),n&2){let e=l().$implicit,t=_(11);s("ngIf",e.url),p(1),s("ngIf",!e.url),p(1),s("ngTemplateOutlet",t)}}function ke(n,o){}function Pe(n,o){}var Me=()=>({opacity:.5,"pointer-events":"none"});function je(n,o){if(n&1){let e=D();h(0,"a",44),N("click",function(i){b(e);let a=l(2).$implicit,r=l();return U(r.handlePreview(a,i))}),L(1,"span",45),g()}if(n&2){let e=l(2).$implicit,t=l();s("href",e.url||e.thumbUrl,H)("ngStyle",e.url||e.thumbUrl?null:mt(3,Me)),I("title",t.locale.previewFile)}}function Ve(n,o){}function Be(n,o){if(n&1&&(w(0),d(1,Ve,0,0,"ng-template",10),T()),n&2){l(2);let e=_(9);p(1),s("ngTemplateOutlet",e)}}function Ae(n,o){}function qe(n,o){if(n&1&&(h(0,"span",41),d(1,je,2,4,"a",42)(2,Be,2,1,"ng-container",43)(3,Ae,0,0,"ng-template",10),g()),n&2){let e=l().$implicit,t=_(7),i=l();p(1),s("ngIf",i.icons.showPreviewIcon),p(1),s("ngIf",e.status==="done"),p(1),s("ngTemplateOutlet",t)}}function He(n,o){if(n&1&&(h(0,"div",46),L(1,"nz-progress",47),g()),n&2){let e=l().$implicit;p(1),s("nzPercent",e.percent)("nzShowInfo",!1)("nzStrokeWidth",2)}}function We(n,o){if(n&1&&(h(0,"div")(1,"div",1),d(2,fe,6,3,"ng-template",null,2,C)(4,Te,5,6,"ng-template",null,3,C)(6,Ue,1,1,"ng-template",null,4,C)(8,Le,1,1,"ng-template",null,5,C)(10,Re,1,1,"ng-template",null,6,C)(12,$e,3,3,"ng-template",null,7,C),h(14,"div",8)(15,"span",9),d(16,ke,0,0,"ng-template",10)(17,Pe,0,0,"ng-template",10),g()(),d(18,qe,4,3,"span",11)(19,He,2,3,"div",12),g()()),n&2){let e=o.$implicit,t=_(3),i=_(13),a=l();pt("ant-upload-list-",a.listType,"-container"),p(1),Tt("ant-upload-list-item ant-upload-list-item-",e.status," ant-upload-list-item-list-type-",a.listType,""),s("@itemState",void 0)("nzTooltipTitle",e.status==="error"?e.message:null),I("data-key",e.key),p(15),s("ngTemplateOutlet",t),p(1),s("ngTemplateOutlet",i),p(1),s("ngIf",a.listType==="picture-card"&&!e.isUploading),p(1),s("ngIf",e.isUploading)}}var Ze=["uploadComp"],Qe=["listComp"],Xe=()=>[];function Ye(n,o){if(n&1&&L(0,"nz-upload-list",8,9),n&2){let e=l(2);lt("display",e.nzShowUploadList?"":"none"),s("locale",e.locale)("listType",e.nzListType)("items",e.nzFileList||mt(13,Xe))("icons",e.nzShowUploadList)("iconRender",e.nzIconRender)("previewFile",e.nzPreviewFile)("previewIsImage",e.nzPreviewIsImage)("onPreview",e.nzPreview)("onRemove",e.onRemove)("onDownload",e.nzDownload)("dir",e.dir)}}function Ge(n,o){n&1&&bt(0)}function Je(n,o){if(n&1&&(w(0),d(1,Ge,1,0,"ng-container",10),T()),n&2){let e=l(2);p(1),s("ngTemplateOutlet",e.nzFileListRender)("ngTemplateOutletContext",V(2,W,e.nzFileList))}}function Ke(n,o){if(n&1&&d(0,Ye,2,14,"nz-upload-list",6)(1,Je,2,4,"ng-container",7),n&2){let e=l();s("ngIf",e.locale&&!e.nzFileListRender),p(1),s("ngIf",e.nzFileListRender)}}function tn(n,o){n&1&&dt(0)}function en(n,o){}function nn(n,o){if(n&1&&(h(0,"div",11)(1,"div",12,13),d(3,en,0,0,"ng-template",14),g()()),n&2){let e=l(),t=_(3);lt("display",e.nzShowButton?"":"none"),s("ngClass",e.classList),p(1),s("options",e._btnOptions),p(2),s("ngTemplateOutlet",t)}}function on(n,o){}function rn(n,o){}function an(n,o){if(n&1){let e=D();w(0),h(1,"div",15),N("drop",function(i){b(e);let a=l();return U(a.fileDrop(i))})("dragover",function(i){b(e);let a=l();return U(a.fileDrop(i))})("dragleave",function(i){b(e);let a=l();return U(a.fileDrop(i))}),h(2,"div",16,13)(4,"div",17),d(5,on,0,0,"ng-template",14),g()()(),d(6,rn,0,0,"ng-template",14),T()}if(n&2){let e=l(),t=_(3),i=_(1);p(1),s("ngClass",e.classList),p(1),s("options",e._btnOptions),p(3),s("ngTemplateOutlet",t),p(1),s("ngTemplateOutlet",i)}}function sn(n,o){}function ln(n,o){}function pn(n,o){if(n&1&&(w(0),d(1,sn,0,0,"ng-template",14)(2,ln,0,0,"ng-template",14),T()),n&2){l(2);let e=_(1),t=_(5);p(1),s("ngTemplateOutlet",e),p(1),s("ngTemplateOutlet",t)}}function cn(n,o){if(n&1&&d(0,pn,3,2,"ng-container",3),n&2){let e=l(),t=_(10);s("ngIf",e.nzListType==="picture-card")("ngIfElse",t)}}function dn(n,o){}function mn(n,o){}function _n(n,o){if(n&1&&d(0,dn,0,0,"ng-template",14)(1,mn,0,0,"ng-template",14),n&2){l();let e=_(5),t=_(1);s("ngTemplateOutlet",e),p(1),s("ngTemplateOutlet",t)}}var un=(()=>{let o=class o{onClick(){this.options.disabled||!this.options.openFileDialogOnClick||this.file.nativeElement.click()}onFileDrop(t){if(this.options.disabled||t.type==="dragover"){t.preventDefault();return}if(this.options.directory)this.traverseFileTree(t.dataTransfer.items);else{let i=Array.prototype.slice.call(t.dataTransfer.files).filter(a=>this.attrAccept(a,this.options.accept));i.length&&this.uploadFiles(i)}t.preventDefault()}onChange(t){if(this.options.disabled)return;let i=t.target;this.uploadFiles(i.files),i.value=""}traverseFileTree(t){let i=(a,r)=>{a.isFile?a.file(c=>{this.attrAccept(c,this.options.accept)&&this.uploadFiles([c])}):a.isDirectory&&a.createReader().readEntries(u=>{for(let f of u)i(f,`${r}${a.name}/`)})};for(let a of t)i(a.webkitGetAsEntry(),"")}attrAccept(t,i){if(t&&i){let a=Array.isArray(i)?i:i.split(","),r=`${t.name}`,c=`${t.type}`,u=c.replace(/\/.*$/,"");return a.some(f=>{let z=f.trim();return z.charAt(0)==="."?r.toLowerCase().indexOf(z.toLowerCase(),r.toLowerCase().length-z.toLowerCase().length)!==-1:/\/\*$/.test(z)?u===z.replace(/\/.*$/,""):c===z})}return!0}attachUid(t){return t.uid||(t.uid=Math.random().toString(36).substring(2)),t}uploadFiles(t){let i=$(Array.prototype.slice.call(t));this.options.filters&&this.options.filters.forEach(a=>{i=i.pipe(M(r=>{let c=a.fn(r);return c instanceof R?c:$(c)}))}),i.subscribe(a=>{a.forEach(r=>{this.attachUid(r),this.upload(r,a)})},a=>{nt("Unhandled upload filter error",a)})}upload(t,i){if(!this.options.beforeUpload)return this.post(t);let a=this.options.beforeUpload(t,i);if(a instanceof R)a.subscribe(r=>{let c=Object.prototype.toString.call(r);c==="[object File]"||c==="[object Blob]"?(this.attachUid(r),this.post(r)):typeof r=="boolean"&&r!==!1&&this.post(t)},r=>{nt("Unhandled upload beforeUpload error",r)});else if(a!==!1)return this.post(t)}post(t){if(this.destroy)return;let i=$(t),a,r=this.options,{uid:c}=t,{action:u,data:f,headers:z,transformFile:E}=r,v={action:typeof u=="string"?u:"",name:r.name,headers:z,file:t,postFile:t,data:f,withCredentials:r.withCredentials,onProgress:r.onProgress?m=>{r.onProgress(m,t)}:void 0,onSuccess:(m,y)=>{this.clean(c),r.onSuccess(m,t,y)},onError:m=>{this.clean(c),r.onError(m,t)}};if(typeof u=="function"){let m=u(t);m instanceof R?i=i.pipe(M(()=>m),A(y=>(v.action=y,t))):v.action=m}if(typeof E=="function"){let m=E(t);i=i.pipe(M(()=>m instanceof R?m:$(m)),yt(y=>a=y))}if(typeof f=="function"){let m=f(t);m instanceof R?i=i.pipe(M(()=>m),A(y=>(v.data=y,a??t))):v.data=m}if(typeof z=="function"){let m=z(t);m instanceof R?i=i.pipe(M(()=>m),A(y=>(v.headers=y,a??t))):v.headers=m}i.subscribe(m=>{v.postFile=m;let y=(r.customRequest||this.xhr).call(this,v);y instanceof ot||nt("Must return Subscription type in '[nzCustomRequest]' property"),this.reqs[c]=y,r.onStart(t)})}xhr(t){let i=new FormData;t.data&&Object.keys(t.data).map(r=>{i.append(r,t.data[r])}),i.append(t.name,t.postFile),t.headers||(t.headers={}),t.headers["X-Requested-With"]!==null?t.headers["X-Requested-With"]="XMLHttpRequest":delete t.headers["X-Requested-With"];let a=new Ot("POST",t.action,i,{reportProgress:!0,withCredentials:t.withCredentials,headers:new Dt(t.headers)});return this.http.request(a).subscribe(r=>{r.type===Et.UploadProgress?(r.total>0&&(r.percent=r.loaded/r.total*100),t.onProgress(r,t.file)):r instanceof $t&&t.onSuccess(r.body,t.file,r)},r=>{this.abort(t.file),t.onError(r,t.file)})}clean(t){let i=this.reqs[t];i instanceof ot&&i.unsubscribe(),delete this.reqs[t]}abort(t){t?this.clean(t&&t.uid):Object.keys(this.reqs).forEach(i=>this.clean(i))}constructor(t,i,a){if(this.ngZone=t,this.http=i,this.elementRef=a,this.reqs={},this.destroy=!1,this.destroy$=new Q,!i)throw new Error("Not found 'HttpClient', You can import 'HttpClientModule' in your root module.")}ngOnInit(){this.ngZone.runOutsideAngular(()=>{q(this.elementRef.nativeElement,"click").pipe(k(this.destroy$)).subscribe(()=>this.onClick()),q(this.elementRef.nativeElement,"keydown").pipe(k(this.destroy$)).subscribe(t=>{this.options.disabled||(t.key==="Enter"||t.keyCode===13)&&this.onClick()})})}ngOnDestroy(){this.destroy=!0,this.destroy$.next(),this.abort()}};o.\u0275fac=function(i){return new(i||o)(x(Y),x(kt,8),x(wt))},o.\u0275cmp=X({type:o,selectors:[["","nz-upload-btn",""]],viewQuery:function(i,a){if(i&1&&tt(re,7),i&2){let r;K(r=et())&&(a.file=r.first)}},hostAttrs:[1,"ant-upload"],hostVars:4,hostBindings:function(i,a){i&1&&N("drop",function(c){return a.onFileDrop(c)})("dragover",function(c){return a.onFileDrop(c)}),i&2&&(I("tabindex","0")("role","button"),j("ant-upload-disabled",a.options.disabled))},inputs:{options:"options"},exportAs:["nzUploadBtn"],attrs:ae,ngContentSelectors:oe,decls:3,vars:4,consts:[["type","file",2,"display","none",3,"multiple","change"],["file",""]],template:function(i,a){i&1&&(ct(),h(0,"input",0,1),N("change",function(c){return a.onChange(c)}),g(),dt(2)),i&2&&(s("multiple",a.options.multiple),I("accept",a.options.accept)("directory",a.options.directory?"directory":null)("webkitdirectory",a.options.directory?"webkitdirectory":null))},encapsulation:2});let n=o;return n})(),ie=n=>!!n&&n.indexOf("image/")===0,O=200,fn=(()=>{let o=class o{get showPic(){return this.listType==="picture"||this.listType==="picture-card"}set items(t){this.list=t}genErr(t){return t.response&&typeof t.response=="string"?t.response:t.error&&t.error.statusText||this.locale.uploadError}extname(t){let i=t.split("/"),r=i[i.length-1].split(/#|\?/)[0];return(/\.[^./\\]*$/.exec(r)||[""])[0]}isImageUrl(t){if(ie(t.type))return!0;let i=t.thumbUrl||t.url||"";if(!i)return!1;let a=this.extname(i);return/^data:image\//.test(i)||/(webp|svg|png|gif|jpg|jpeg|jfif|bmp|dpg)$/i.test(a)?!0:/^data:/.test(i)?!1:!a}getIconType(t){return this.showPic?t.isUploading||!t.thumbUrl&&!t.url?"uploading":"thumbnail":""}previewImage(t){if(!ie(t.type)||!this.platform.isBrowser)return $("");let i=this.doc.createElement("canvas");i.width=O,i.height=O,i.style.cssText=`position: fixed; left: 0; top: 0; width: ${O}px; height: ${O}px; z-index: 9999; display: none;`,this.doc.body.appendChild(i);let a=i.getContext("2d"),r=new Image,c=URL.createObjectURL(t);return r.src=c,q(r,"load").pipe(A(()=>{let{width:u,height:f}=r,z=O,E=O,v=0,m=0;u<f?(E=f*(O/u),m=-(E-z)/2):(z=u*(O/f),v=-(z-E)/2);try{a.drawImage(r,v,m,z,E)}catch{}let y=i.toDataURL();return this.doc.body.removeChild(i),URL.revokeObjectURL(c),y}))}genThumb(){if(!this.platform.isBrowser)return;let t=window;!this.showPic||typeof document>"u"||typeof t>"u"||!t.FileReader||!t.File||this.list.filter(i=>i.originFileObj instanceof File&&i.thumbUrl===void 0).forEach(i=>{i.thumbUrl="";let a=(this.previewFile?this.previewFile(i):this.previewImage(i.originFileObj)).pipe(k(this.destroy$));this.ngZone.runOutsideAngular(()=>{a.subscribe(r=>{this.ngZone.run(()=>{i.thumbUrl=r,this.detectChanges()})})})})}showDownload(t){return!!(this.icons.showDownloadIcon&&t.status==="done")}fixData(){this.list.forEach(t=>{t.isUploading=t.status==="uploading",t.message=this.genErr(t),t.linkProps=typeof t.linkProps=="string"?JSON.parse(t.linkProps):t.linkProps,t.isImageUrl=this.previewIsImage?this.previewIsImage(t):this.isImageUrl(t),t.iconType=this.getIconType(t),t.showDownload=this.showDownload(t)})}handlePreview(t,i){if(this.onPreview)return i.preventDefault(),this.onPreview(t)}handleRemove(t,i){i.preventDefault(),this.onRemove&&this.onRemove(t)}handleDownload(t){typeof this.onDownload=="function"?this.onDownload(t):t.url&&window.open(t.url)}constructor(t,i,a,r){this.cdr=t,this.doc=i,this.ngZone=a,this.platform=r,this.list=[],this.locale={},this.iconRender=null,this.dir="ltr",this.destroy$=new Q}detectChanges(){this.fixData(),this.cdr.detectChanges()}ngOnChanges(){this.fixData(),this.genThumb()}ngOnDestroy(){this.destroy$.next()}};o.\u0275fac=function(i){return new(i||o)(x(at),x(_t),x(Y),x(Pt))},o.\u0275cmp=X({type:o,selectors:[["nz-upload-list"]],hostAttrs:[1,"ant-upload-list"],hostVars:8,hostBindings:function(i,a){i&2&&j("ant-upload-list-rtl",a.dir==="rtl")("ant-upload-list-text",a.listType==="text")("ant-upload-list-picture",a.listType==="picture")("ant-upload-list-picture-card",a.listType==="picture-card")},inputs:{locale:"locale",listType:"listType",items:"items",icons:"icons",onPreview:"onPreview",onRemove:"onRemove",onDownload:"onDownload",previewFile:"previewFile",previewIsImage:"previewIsImage",iconRender:"iconRender",dir:"dir"},exportAs:["nzUploadList"],features:[rt],decls:1,vars:1,consts:[[3,"class",4,"ngFor","ngForOf"],["nz-tooltip","",3,"nzTooltipTitle"],["icon",""],["iconNode",""],["removeIcon",""],["downloadIcon",""],["downloadOrDelete",""],["preview",""],[1,"ant-upload-list-item-info"],[1,"ant-upload-span"],[3,"ngTemplateOutlet"],["class","ant-upload-list-item-actions",4,"ngIf"],["class","ant-upload-list-item-progress",4,"ngIf"],[3,"ngSwitch"],["class","ant-upload-list-item-thumbnail",3,"ant-upload-list-item-file",4,"ngSwitchCase"],["class","ant-upload-list-item-thumbnail","target","_blank","rel","noopener noreferrer",3,"ant-upload-list-item-file","href","click",4,"ngSwitchCase"],["class","ant-upload-text-icon",4,"ngSwitchDefault"],["noImageThumbTpl",""],[1,"ant-upload-list-item-thumbnail"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],["target","_blank","rel","noopener noreferrer",1,"ant-upload-list-item-thumbnail",3,"href","click"],["class","ant-upload-list-item-image",3,"src",4,"ngIf","ngIfElse"],[1,"ant-upload-list-item-image",3,"src"],[1,"ant-upload-text-icon"],[4,"ngIf","ngIfElse"],["customIconRender",""],["iconNodeFileIcon",""],[4,"ngSwitchCase"],["nz-icon","",3,"nzType",4,"ngSwitchDefault"],["nz-icon","","nzType","loading"],["nz-icon","",3,"nzType"],["nz-icon","","nzTheme","twotone",3,"nzType"],["type","button","nz-button","","nzType","text","nzSize","small","class","ant-upload-list-item-card-actions-btn",3,"click",4,"ngIf"],["type","button","nz-button","","nzType","text","nzSize","small",1,"ant-upload-list-item-card-actions-btn",3,"click"],["nz-icon","","nzType","delete"],["nz-icon","","nzType","download"],[3,"class",4,"ngIf"],["target","_blank","rel","noopener noreferrer","class","ant-upload-list-item-name",3,"href","click",4,"ngIf"],["class","ant-upload-list-item-name",3,"click",4,"ngIf"],["target","_blank","rel","noopener noreferrer",1,"ant-upload-list-item-name",3,"href","click"],[1,"ant-upload-list-item-name",3,"click"],[1,"ant-upload-list-item-actions"],["target","_blank","rel","noopener noreferrer",3,"href","ngStyle","click",4,"ngIf"],[4,"ngIf"],["target","_blank","rel","noopener noreferrer",3,"href","ngStyle","click"],["nz-icon","","nzType","eye"],[1,"ant-upload-list-item-progress"],["nzType","line",3,"nzPercent","nzShowInfo","nzStrokeWidth"]],template:function(i,a){i&1&&d(0,We,20,14,"div",0),i&2&&s("ngForOf",a.list)},dependencies:[It,ut,ft,St,Lt,Nt,Ft,Kt,ee,Zt,Yt,Xt],encapsulation:2,data:{animation:[qt("itemState",[zt(":enter",[it({height:"0",width:"0",opacity:0}),gt(150,it({height:"*",width:"*",opacity:1}))]),zt(":leave",[gt(150,it({height:"0",width:"0",opacity:0}))])])]},changeDetection:0});let n=o;return n})(),B=class B{set nzShowUploadList(o){this._showUploadList=typeof o=="boolean"?At(o):o}get nzShowUploadList(){return this._showUploadList}zipOptions(){typeof this.nzShowUploadList=="boolean"&&this.nzShowUploadList&&(this.nzShowUploadList={showPreviewIcon:!0,showRemoveIcon:!0,showDownloadIcon:!0});let o=this.nzFilter.slice();if(this.nzMultiple&&this.nzLimit>0&&o.findIndex(e=>e.name==="limit")===-1&&o.push({name:"limit",fn:e=>e.slice(-this.nzLimit)}),this.nzSize>0&&o.findIndex(e=>e.name==="size")===-1&&o.push({name:"size",fn:e=>e.filter(t=>t.size/1024<=this.nzSize)}),this.nzFileType&&this.nzFileType.length>0&&o.findIndex(e=>e.name==="type")===-1){let e=this.nzFileType.split(",");o.push({name:"type",fn:t=>t.filter(i=>~e.indexOf(i.type))})}return this._btnOptions={disabled:this.nzDisabled,accept:this.nzAccept,action:this.nzAction,directory:this.nzDirectory,openFileDialogOnClick:this.nzOpenFileDialogOnClick,beforeUpload:this.nzBeforeUpload,customRequest:this.nzCustomRequest,data:this.nzData,headers:this.nzHeaders,name:this.nzName,multiple:this.nzMultiple,withCredentials:this.nzWithCredentials,filters:o,transformFile:this.nzTransformFile,onStart:this.onStart,onProgress:this.onProgress,onSuccess:this.onSuccess,onError:this.onError},this}constructor(o,e,t,i,a){this.ngZone=o,this.document=e,this.cdr=t,this.i18n=i,this.directionality=a,this.destroy$=new Q,this.dir="ltr",this.nzType="select",this.nzLimit=0,this.nzSize=0,this.nzDirectory=!1,this.nzOpenFileDialogOnClick=!0,this.nzFilter=[],this.nzFileList=[],this.nzDisabled=!1,this.nzListType="text",this.nzMultiple=!1,this.nzName="file",this._showUploadList=!0,this.nzShowButton=!0,this.nzWithCredentials=!1,this.nzIconRender=null,this.nzFileListRender=null,this.nzChange=new st,this.nzFileListChange=new st,this.onStart=r=>{this.nzFileList||(this.nzFileList=[]);let c=this.fileToObject(r);c.status="uploading",this.nzFileList=this.nzFileList.concat(c),this.nzFileListChange.emit(this.nzFileList),this.nzChange.emit({file:c,fileList:this.nzFileList,type:"start"}),this.detectChangesList()},this.onProgress=(r,c)=>{let u=this.nzFileList,f=this.getFileItem(c,u);f.percent=r.percent,this.nzChange.emit({event:r,file:Z({},f),fileList:this.nzFileList,type:"progress"}),this.detectChangesList()},this.onSuccess=(r,c)=>{let u=this.nzFileList,f=this.getFileItem(c,u);f.status="done",f.response=r,this.nzChange.emit({file:Z({},f),fileList:u,type:"success"}),this.detectChangesList()},this.onError=(r,c)=>{let u=this.nzFileList,f=this.getFileItem(c,u);f.error=r,f.status="error",this.nzChange.emit({file:Z({},f),fileList:u,type:"error"}),this.detectChangesList()},this.onRemove=r=>{this.uploadComp.abort(r),r.status="removed";let c=typeof this.nzRemove=="function"?this.nzRemove(r):this.nzRemove==null?!0:this.nzRemove;(c instanceof R?c:$(c)).pipe(Ct(u=>u)).subscribe(()=>{this.nzFileList=this.removeFileItem(r,this.nzFileList),this.nzChange.emit({file:r,fileList:this.nzFileList,type:"removed"}),this.nzFileListChange.emit(this.nzFileList),this.cdr.detectChanges()})},this.prefixCls="ant-upload",this.classList=[]}fileToObject(o){return{lastModified:o.lastModified,lastModifiedDate:o.lastModifiedDate,name:o.filename||o.name,size:o.size,type:o.type,uid:o.uid,response:o.response,error:o.error,percent:0,originFileObj:o}}getFileItem(o,e){return e.filter(t=>t.uid===o.uid)[0]}removeFileItem(o,e){return e.filter(t=>t.uid!==o.uid)}fileDrop(o){o.type!==this.dragState&&(this.dragState=o.type,this.setClassMap())}detectChangesList(){this.cdr.detectChanges(),this.listComp?.detectChanges()}setClassMap(){let o=[];this.nzType==="drag"?(this.nzFileList.some(e=>e.status==="uploading")&&o.push(`${this.prefixCls}-drag-uploading`),this.dragState==="dragover"&&o.push(`${this.prefixCls}-drag-hover`)):o=[`${this.prefixCls}-select-${this.nzListType}`],this.classList=[this.prefixCls,`${this.prefixCls}-${this.nzType}`,...o,this.nzDisabled&&`${this.prefixCls}-disabled`||"",this.dir==="rtl"&&`${this.prefixCls}-rtl`||""].filter(e=>!!e),this.cdr.detectChanges()}ngOnInit(){this.dir=this.directionality.value,this.directionality.change?.pipe(k(this.destroy$)).subscribe(o=>{this.dir=o,this.setClassMap(),this.cdr.detectChanges()}),this.i18n.localeChange.pipe(k(this.destroy$)).subscribe(()=>{this.locale=this.i18n.getLocaleData("Upload"),this.detectChangesList()})}ngAfterViewInit(){this.ngZone.runOutsideAngular(()=>q(this.document.body,"drop").pipe(k(this.destroy$)).subscribe(o=>{o.preventDefault(),o.stopPropagation()}))}ngOnChanges(){this.zipOptions().setClassMap()}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}};B.\u0275fac=function(e){return new(e||B)(x(Y),x(_t),x(at),x(Ht),x(jt,8))},B.\u0275cmp=X({type:B,selectors:[["nz-upload"]],viewQuery:function(e,t){if(e&1&&(tt(Ze,5),tt(Qe,5)),e&2){let i;K(i=et())&&(t.uploadComp=i.first),K(i=et())&&(t.listComp=i.first)}},hostVars:2,hostBindings:function(e,t){e&2&&j("ant-upload-picture-card-wrapper",t.nzListType==="picture-card")},inputs:{nzType:"nzType",nzLimit:"nzLimit",nzSize:"nzSize",nzFileType:"nzFileType",nzAccept:"nzAccept",nzAction:"nzAction",nzDirectory:"nzDirectory",nzOpenFileDialogOnClick:"nzOpenFileDialogOnClick",nzBeforeUpload:"nzBeforeUpload",nzCustomRequest:"nzCustomRequest",nzData:"nzData",nzFilter:"nzFilter",nzFileList:"nzFileList",nzDisabled:"nzDisabled",nzHeaders:"nzHeaders",nzListType:"nzListType",nzMultiple:"nzMultiple",nzName:"nzName",nzShowUploadList:"nzShowUploadList",nzShowButton:"nzShowButton",nzWithCredentials:"nzWithCredentials",nzRemove:"nzRemove",nzPreview:"nzPreview",nzPreviewFile:"nzPreviewFile",nzPreviewIsImage:"nzPreviewIsImage",nzTransformFile:"nzTransformFile",nzDownload:"nzDownload",nzIconRender:"nzIconRender",nzFileListRender:"nzFileListRender"},outputs:{nzChange:"nzChange",nzFileListChange:"nzFileListChange"},exportAs:["nzUpload"],features:[rt],ngContentSelectors:oe,decls:11,vars:2,consts:[["list",""],["con",""],["btn",""],[4,"ngIf","ngIfElse"],["select",""],["pic",""],[3,"display","locale","listType","items","icons","iconRender","previewFile","previewIsImage","onPreview","onRemove","onDownload","dir",4,"ngIf"],[4,"ngIf"],[3,"locale","listType","items","icons","iconRender","previewFile","previewIsImage","onPreview","onRemove","onDownload","dir"],["listComp",""],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[3,"ngClass"],["nz-upload-btn","",3,"options"],["uploadComp",""],[3,"ngTemplateOutlet"],[3,"ngClass","drop","dragover","dragleave"],["nz-upload-btn","",1,"ant-upload-btn",3,"options"],[1,"ant-upload-drag-container"]],template:function(e,t){if(e&1&&(ct(),d(0,Ke,2,2,"ng-template",null,0,C)(2,tn,1,0,"ng-template",null,1,C)(4,nn,4,5,"ng-template",null,2,C)(6,an,7,4,"ng-container",3)(7,cn,1,2,"ng-template",null,4,C)(9,_n,2,2,"ng-template",null,5,C)),e&2){let i=_(8);p(6),s("ngIf",t.nzType==="drag")("ngIfElse",i)}},dependencies:[Vt,Ut,ut,ft,un,fn],encapsulation:2,changeDetection:0});var F=B;S([ht()],F.prototype,"nzLimit",void 0);S([ht()],F.prototype,"nzSize",void 0);S([P()],F.prototype,"nzDirectory",void 0);S([P()],F.prototype,"nzOpenFileDialogOnClick",void 0);S([P()],F.prototype,"nzDisabled",void 0);S([P()],F.prototype,"nzMultiple",void 0);S([P()],F.prototype,"nzShowButton",void 0);S([P()],F.prototype,"nzWithCredentials",void 0);var ti=(()=>{let o=class o{};o.\u0275fac=function(i){return new(i||o)},o.\u0275mod=vt({type:o}),o.\u0275inj=xt({imports:[Bt,Rt,Jt,Mt,te,ne,Wt,Qt,Gt]});let n=o;return n})();export{F as a,ti as b};
